<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.w3.org/1999/xhtml" xmlns:x="https://www.texmacs.org/2002/extensions">
  <head>
    <title>No title</title>
    <meta content="TeXmacs 1.99.21" name="generator"></meta>
    <style type="text/css">
      body { text-align: justify } h5 { display: inline; padding-right: 1em }
      h6 { display: inline; padding-right: 1em } table { border-collapse:
      collapse } td { padding: 0.2em; vertical-align: baseline } dt { float:
      left; min-width: 1.75em; text-align: right; padding-right: 0.75em;
      font-weight: bold; } dd { margin-left: 2.75em; padding-bottom: 0.25em; }
      dd p { padding-top: 0em; } .subsup { display: inline; vertical-align:
      -0.2em } .subsup td { padding: 0px; text-align: left} .fraction {
      display: inline; vertical-align: -0.8em } .fraction td { padding: 0px;
      text-align: center } .wide { position: relative; margin-left: -0.4em }
      .accent { position: relative; margin-left: -0.4em; top: -0.1em }
      .title-block { width: 100%; text-align: center } .title-block p {
      margin: 0px } .compact-block p { margin-top: 0px; margin-bottom: 0px }
      .left-tab { text-align: left } .center-tab { text-align: center }
      .balloon-anchor { border-bottom: 1px dotted #000000; outline: none;
      cursor: help; position: relative; } .balloon-anchor [hidden] {
      margin-left: -999em; position: absolute; display: none; }
      .balloon-anchor: hover [hidden] { position: absolute; left: 1em; top:
      2em; z-index: 99; margin-left: 0; width: 500px; display: inline-block; }
      .balloon-body { } .ornament { border-width: 1px; border-style: solid;
      border-color: black; display: inline-block; padding: 0.2em; } .right-tab
      { float: right; position: relative; top: -1em; } .no-breaks {
      white-space: nowrap; } 
    </style>
    <link href="../resources/notes-base.css" type="text/css" rel="stylesheet"></link>
  </head>
  <body>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      Besides <a href="./a-tikz-example.html">generating  figures within a  plugin session</a>, it is
      possible to embed them directly in a document, so that they are
      displayed as an image (without the code and the plugin prompt), while
      keeping them editable.
    </p>
    <p>
      See  and its Section4: <strong>Plug-ins as scripting language</strong>
      for a general description of the facility.
    </p>
    <p>
      Let us see here how to use the  environment to embed an editable 
      picture in a TeXmacs document, making in this way  a flexible graphing
      tool for TeXmacs.
    </p>
    <p>
      The first step is inserting an executable field using the menu:
    </p>
    <p>
      
    </p>
    <p>
      (there are more options under , but  is the most recent plugin with the
      most flexible functionality).
    </p>
    <p>
      This results in a yellow-colored field, introduced by the
      &ldquo;<samp>Graph</samp>&rdquo; title on a gray background:
    </p>
    <p>
      
    </p>
    <p>
      Press  to start typing or pasting code; pressing  now would immediately
      compile the yet-empty code, yielding a blank figure. Once  has been
      pressed for the first time and it becomes possible to type code, the
      effects of the keys change:  itself executes the code (generates the
      image), while  inserts a new line (the behaviour of the  and  key
      combinations is described in the Manual at  in its Section3).
    </p>
    <p>
      As a first example, let us choose one based on  only, that does not need
      any further LaTeX packages, taking it from the guide &ldquo;A very
      minimal introduction to Ti<em>k</em>Z&rdquo; by Jacques Cr&eacute;mer
      (available at , see section 4.1). Since we want to use the  option of
      the  plugin, the first line in our code has to consist of the characters
      <tt class="verbatim">%tikz</tt> :
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      Press  to execute the code and obtain after a few seconds the  picture:
    </p>
    <p>
      
    </p>
    <p>
      The appearance within the TeXmacs editor is a bit rough, but it is fine
      in the converted pdf documents.
    </p>
    <p>
      The executable  environment with the  picture can be placed inside a
      TeXmacs image environment:
    </p>
    <p>
      
    </p>
    <p>
      Placing the cursor at the generated figure (just after it: the cursor
      becomes as tall as the figure) makes two functions available.
    </p>
    <p>
      <em>First function: get back to the executable field</em>
    </p>
    <p>
      With the cursor at the figure (in this case, it can be placed before the
      figure as well as after it), press  and obtain back the executable
      field, with the code ready for editing:
    </p>
    <p>
      
    </p>
    <p>
      Press  to compile and display again. This process can be repeated as
      many times as one wishes.
    </p>
    <p>
      <em>Second function: get the inactivated image macro</em>
    </p>
    <p>
      Again with the cursor at the figure (in this case only after the figure:
      placing it before the figure does not make the function we are
      describing available), press  and obtain the inactivated TeXmacs image
      macro:
    </p>
    <p>
      
    </p>
    <p>
      The script is now invisible (it is inside a hidden <font color="blue">&lt;</font>script-output<font
      color="blue">|</font><font color="#C68"></font><font color="blue">|</font><font color="#C68"></font><font
      color="blue">|</font><font color="#C68"></font><font color="blue">|</font><font color="#C68"></font><font
      color="blue">&gt;</font> macro).
    </p>
    <p>
      One possibility here is to adjust the width of the image: as an example,
      place the cursor in the field with the width and change it from 0.618par
      to 0.9par
    </p>
    <p>
      
    </p>
    <p>
      press  to get back to the figure, which has now become larger:
    </p>
    <p>
      
    </p>
    <p>
      The initial script is again accessible (with the  key), but accessing
      and executing it resets the figure size to 0.618par.
    </p>
    <p>
      The other parameter fields in the figure macro can be used to alter the
      height of the image (second parameter, in this case the image
      proportions are not preserved) and its placement with respect to the
      insertion point (third and fourth parameters):
    </p>
    <p>
      
    </p>
    <p>
      and again activating with  obtain
    </p>
    <p>
      
    </p>
    <p>
      The white space above the line you are reading now is part of the image
      field, where the image itself has been sized down and shifted right and
      up by the change of the macro parameters.
    </p>
    <p>
      
    </p>
    <p>
      As in  plugin sessions, one can place in  executables complex  programs
      that depend on other LaTeX packages. In this case one should insert in
      the executable field the whole LaTeX document (the preferred class is
      <tt class="verbatim">standalone</tt>); the first line in this case must consist of
      the characters <tt class="verbatim">%pdflatex</tt> .
    </p>
    <p>
      Here is the same code (copied from this <a href="https://tex.stackexchange.com/questions/164155/2d-and-3d-vectors-in-tikz">TeX StackExchange
      question</a>) as in <a href="./a-tikz-example.html">Example of TikZ figure generation with the
      Graph plugin</a>; it needs the package <code>tikz-3dplot</code>:
    </p>
    <p>
      
    </p>
    <p>
      Executing the code (press ) yields
    </p>
    <p>
      
    </p>
    <p>
      Once more, the  environment with the LaTeX code can be placed anywhere
      in a TeXmacs document, making it possible for example to place complex 
      pictures inside TeXmacs image environments seamlessly.
    </p>
    <p>
      
    </p>
    <ul>
      <li>
        <p>
          If the first line does not correspond to any of the backends known
          to , compilation will display a notice (if for example the first
          line is <tt class="verbatim">%pdftex</tt>,  will answer: <tt class="verbatim">No such
          Graphs backend: pdftex</tt>). In this case substitute in the first
          line one of the recognized backends.
        </p>
      </li>
      <li>
        <p>
          The plugin may hang during compilation, displaying the notice <font
          color="red">Busy</font> in the executable  window; one case in which this
          may happen is if one has forgotten to end the LaTeX code with the
          command <tt class="verbatim">\end{document}</tt>.
        </p>
        <p>
          If this happens, none of the  executable environments will compile
          anymore (even the ones that have already compiled once: all of them,
          if deactivated and recompiled, will display the <font color="red">Busy</font>
          notice without completing compilation). In this case one needs to
          completely close and restart TeXmacs.
        </p>
      </li>
    </ul>
  </body>
</html>