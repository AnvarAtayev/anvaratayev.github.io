<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns="http://www.w3.org/1999/xhtml" xmlns:x="https://www.texmacs.org/2002/extensions">
  <head>
    <title>No title</title>
    <meta content="TeXmacs 1.99.21" name="generator"></meta>
    <style type="text/css">
      body { text-align: justify } h5 { display: inline; padding-right: 1em }
      h6 { display: inline; padding-right: 1em } table { border-collapse:
      collapse } td { padding: 0.2em; vertical-align: baseline } dt { float:
      left; min-width: 1.75em; text-align: right; padding-right: 0.75em;
      font-weight: bold; } dd { margin-left: 2.75em; padding-bottom: 0.25em; }
      dd p { padding-top: 0em; } .subsup { display: inline; vertical-align:
      -0.2em } .subsup td { padding: 0px; text-align: left} .fraction {
      display: inline; vertical-align: -0.8em } .fraction td { padding: 0px;
      text-align: center } .wide { position: relative; margin-left: -0.4em }
      .accent { position: relative; margin-left: -0.4em; top: -0.1em }
      .title-block { width: 100%; text-align: center } .title-block p {
      margin: 0px } .compact-block p { margin-top: 0px; margin-bottom: 0px }
      .left-tab { text-align: left } .center-tab { text-align: center }
      .balloon-anchor { border-bottom: 1px dotted #000000; outline: none;
      cursor: help; position: relative; } .balloon-anchor [hidden] {
      margin-left: -999em; position: absolute; display: none; }
      .balloon-anchor: hover [hidden] { position: absolute; left: 1em; top:
      2em; z-index: 99; margin-left: 0; width: 500px; display: inline-block; }
      .balloon-body { } .ornament { border-width: 1px; border-style: solid;
      border-color: black; display: inline-block; padding: 0.2em; } .right-tab
      { float: right; position: relative; top: -1em; } .no-breaks {
      white-space: nowrap; } 
    </style>
    <link href="../resources/notes-base.css" type="text/css" rel="stylesheet"></link>
  </head>
  <body>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      TeXmacs provides a set of graphic primitives, which can be accessed in
      several ways: interactively with the Texmacs editor, directly through
      the TeXmacs source code (TeXmacs trees) or through  (as  trees). The
      manual at  describes interactive generation and editing of drawings.
    </p>
    <p>
      In this note, we shall step through the generation of a simple drawing
      starting from Scheme code and translating it into a TeXmacs tree which
      then displays the graphics. We assume that the reader is familiar with
      simple Scheme syntax. Two possible web resources for learning  are the 
      book <a href="https://en.wikibooks.org/wiki/Scheme_Programming">Scheme programming</a> and <a href="http://www.shido.info/lisp/idx_scm_e.html">Yet Another Scheme
      Tutorial</a> by Takafumi Shido.
    </p>
    <p>
      We want to draw a triangle inscribed inside a semicircle, mark its
      vertices with letters and decorate the drawing with the text TeXmacs.
    </p>
    <p>
      The most comfortable way of generating a drawing with  is within a
      session, so that is the way we'll take in this note. We'll see in other
      notes how to <a href="./scheme-graphics-embedding.html">blend seamlessly graphics in a document</a> and
      generate it through external source files.
    </p>
    <p>
      The first step in working with a session is opening it, with . As a side
      step, it is convenient to select  in the preferences box under ; this
      helps coding in  by highlighting the parenthesis that matches the one
      next to the cursor.
    </p>
    <p>
      Now we will insert our commands at the prompt. We place small comments
      within text fields inserted by choosing  in the contextual menu, while
      longer explanations fit better in breaks between sessions.
    </p>
    <p>
      
    </p>
    <p>
      The Scheme function  we just defined generates a TeXmacs graphics point
      parametrized by its  and  coordinates.
    </p>
    <p>
      is a TeXmacs graphics primitive that represents a point and expects two
      strings. It is represented in  with a list of three elements, the first
      element in the list being the symbol  (since  is a  symbol, it fits well
      within the quasiquote that also defines the list).
    </p>
    <p>
      Using the  function we shall now define a few points.
    </p>
    <p>
      The  interpreter expects one expression per prompt (evaluates only the
      first one it finds in each prompt), so we enter the expressions we need
      in separate prompts; the code in external  programs is&mdash;of
      course&mdash;more compact.
    </p>
    <p>
      
    </p>
    <p>
      Let us take a look at the points we just defined. To display them as a
      TeXmacs graphics, we need to insert them in a canvas with the 
      primitive, entered in  as <tt class="verbatim">graphics</tt>. The  expression that
      starts with <tt class="verbatim">graphics</tt> contains, after the symbol <tt
      class="verbatim">graphics</tt>, a list of graphical objects; we will then write
      the canvas with our points as  with proper quasi- and unquoting
      (slightly different in the final form of the expression). Since  by
      itself yields a rather large canvas, we size it down enclosing it in a 
      primitive which specifies the geometry. The  construct needs to be
      quasiquoted as  and <tt class="verbatim">graphics</tt> are Scheme symbols, so that
      the <tt class="verbatim">pA</tt>, <tt class="verbatim">pB</tt> and <tt class="verbatim">pC</tt>
      variables, which represent the points, must be unquoted. Finally,
      everything has to be wrapped in the <tt class="verbatim">stree-&gt;tree</tt>
      function to become a TeXmacs tree. The result is a graphical
      representation of the three points:
    </p>
    <p>
      
    </p>
    <p>
      This example, with constructs boxed inside each other, is typical of :
      we compose a list out of other lists. In this case we pass then the
      list, made of lists, symbols and strings, to the function  that turns it
      into a TeXmacs tree.
    </p>
    <p>
      The next step is composing more complex graphical objects using the
      points we defined.
    </p>
    <p>
      We will use the TeXmacs graphical objects , ,  and . Their meaning and 
      syntax is described in the following table:
    </p>
    <table style="width: 100%">
      <tbody><tr>
        <td style="border-top: 1px solid; border-bottom: 1px solid; border-left: 0px solid">object</td>
        <td style="border-top: 1px solid; border-bottom: 1px solid">description</td>
        <td style="border-top: 1px solid; border-bottom: 1px solid; border-right: 0px solid">Scheme syntax</td>
      </tr><tr>
        <td style="border-top: 1px solid"></td>
        <td style="border-top: 1px solid"><p>
          an arc of circle, defined by three points
        </p></td>
        <td style="border-top: 1px solid"></td>
      </tr><tr>
        <td></td>
        <td><p>
          a polyline, defined by two or more points
        </p></td>
        <td></td>
      </tr><tr>
        <td></td>
        <td><p>
          a closed polyline, defined by three or more points
        </p></td>
        <td></td>
      </tr><tr>
        <td></td>
        <td><p>
          a text box, whose position is defined with a single point
        </p></td>
        <td></td>
      </tr></tbody>
    </table>
    <p>
      Before composing the full drawing, let us take a look at one of the
      constructs; as an example we choose . We place it as usual inside a 
      construct to select the color and we wrap the  up in the  primitive,
      which is in turn enclosed in its own  which sets the  property of the
      graphics object: 
    </p>
    <p>
      
    </p>
    <p>
      We are ready to compose our drawing; as usual the syntax is 
    </p>
    <p>
      
    </p>
    <p>
      properly enclosed in other constructs (we change the linewidth as well
      as the color and we set the font shape for the whole graphics to
      italics), with the appropriate sequence of quasiquoting and unquotings:
    </p>
    <p>
      
    </p>
    <p>
      In follow-up tutorials we will see how to <a href="./scheme-graphics-embedding.html">embed seamlessly 
      graphics in a document</a> using the  environment and how to generate
      them from external files.
    </p>
    <p>
      As a conclusion of this note, here is a collection of TeXmacs graphical
      objects, illustrating a few possibilities:
    </p>
    <p>
      <img src="scheme-graphics-1.png" style="margin-left: -0.0248242424242424em; margin-bottom: 0em; margin-right: -0.0248242424242449em; margin-top: 0em; vertical-align: -13.1939878787879em; height: 26.3879757575758em"></img>
    </p>
  </body>
</html>